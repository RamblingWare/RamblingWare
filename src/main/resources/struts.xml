<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
    "http://struts.apache.org/dtds/struts-2.5.dtd">
<struts>
	
	<!-- / (ROOT) -->
	<package name="root" namespace="/" extends="struts-default">
	
		<interceptors>
			<interceptor name="archive" class="com.rant.action.interceptor.ArchiveInterceptor"></interceptor>
			<interceptor name="header" class="com.rant.action.interceptor.HeaderInterceptor"></interceptor>
			
			<!-- Archive Interceptor -->
			<interceptor-stack name="archiveStack">
				<interceptor-ref name="header"></interceptor-ref>
				<interceptor-ref name="archive"></interceptor-ref>
				<interceptor-ref name="defaultStack"></interceptor-ref>
			</interceptor-stack>
		</interceptors>

		<default-interceptor-ref name="archiveStack"></default-interceptor-ref>

		<global-results>
			<result name="login">/WEB-INF/manage/login.jsp</result>
			<result name="input">/WEB-INF/manage/otp.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
		</global-results>
		
		<global-exception-mappings>
			<exception-mapping exception="java.lang.Exception" result="error"/>
		</global-exception-mappings>
		
		<!-- ACTIONS -->
		<action name="" class="com.rant.action.HomeAction">
			<result name="success">/WEB-INF/index.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
		<!-- Static pages -->
		<action name="about">
			<result>/WEB-INF/other/about.jsp</result>
		</action>
		<action name="terms">
			<result>/WEB-INF/other/terms.jsp</result>
		</action>
		<action name="privacy">
			<result>/WEB-INF/other/privacy.jsp</result>
		</action>
		
		<!-- RSS and Search -->
		<action name="rss" class="com.rant.action.RssAction">
			<!-- Success already returns XML -->
			<result name="error">/WEB-INF/error/error.jsp</result>
		</action>
		<action name="search" class="com.rant.action.SearchAction">
			<!-- Success already redirects to external website -->
			<result name="input">/WEB-INF/other/search.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
		</action>
		
		<!-- FORWARD ACTIONS -->
		<action name="blog">
			<result type="redirect">/blog/</result>
		</action>
		<action name="tag">
			<result type="redirect">/tag/</result>
		</action>
		<action name="year">
			<result type="redirect">/year/</result>
		</action>
		<action name="category">
			<result type="redirect">/category/</result>
		</action>
		<action name="author">
			<result type="redirect">/author/</result>
		</action>
		<action name="dashboard">
			<result type="redirect">/dashboard/</result>
		</action>
		
		<!-- UNKNOWN ACTIONS ARE 404 ERRORS -->
		<action name="*">
			<interceptor-ref name="defaultStack"></interceptor-ref>
			<result>/WEB-INF/error/404.jsp</result>
		</action>
	</package>
	
	<!-- /BLOG/ -->
	<package name="blog" namespace="/blog" extends="root">

		<default-interceptor-ref name="archiveStack"></default-interceptor-ref>
				
		<action name="" class="com.rant.action.BlogAction">
			<result name="success">/WEB-INF/blog/blog.jsp</result>
			<result name="error">/WEB-INF/blog/blog.jsp</result>
		</action>
		
		<action name="page/*" class="com.rant.action.BlogAction">
			<result name="success">/WEB-INF/blog/blog.jsp</result>
			<result name="error">/WEB-INF/blog/blog.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
		<action name="post/*" class="com.rant.action.PostAction">
			<result name="success">/WEB-INF/blog/post.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
		<action name="*" class="com.rant.action.PostAction">
			<result name="success">/WEB-INF/blog/post.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
	</package>
	
	<!-- /TAG/ -->
	<package name="tag" namespace="/tag" extends="root">

		<default-interceptor-ref name="archiveStack"></default-interceptor-ref>
		
		<action name="" class="com.rant.action.TagsAction">
			<result name="success">/WEB-INF/tag/tags.jsp</result>
			<result name="error">/WEB-INF/tag/tags.jsp</result>
		</action>
		
		<action name="*/page/*" class="com.rant.action.TagAction">
			<result name="success">/WEB-INF/tag/tag.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
		<action name="*" class="com.rant.action.TagAction">
			<result name="success">/WEB-INF/tag/tag.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
	</package>
	
	<!-- /YEAR/ -->
	<package name="year" namespace="/year" extends="root">

		<default-interceptor-ref name="archiveStack"></default-interceptor-ref>
		
		<action name="" class="com.rant.action.YearsAction">
			<result name="success">/WEB-INF/year/years.jsp</result>
			<result name="error">/WEB-INF/year/years.jsp</result>
		</action>
		
		<action name="*/page/*" class="com.rant.action.YearAction">
			<result name="success">/WEB-INF/year/year.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
		<action name="*" class="com.rant.action.YearAction">
			<result name="success">/WEB-INF/year/year.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
	</package>
	
	<!-- /CATEGORY/ -->
	<package name="category" namespace="/category" extends="root">

		<default-interceptor-ref name="archiveStack"></default-interceptor-ref>
		
		<action name="" class="com.rant.action.CategoriesAction">
			<result name="success">/WEB-INF/category/categories.jsp</result>
			<result name="error">/WEB-INF/category/categories.jsp</result>
		</action>
		
		<action name="*/page/*" class="com.rant.action.CategoryAction">
			<result name="success">/WEB-INF/category/category.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
		<action name="*" class="com.rant.action.CategoryAction">
			<result name="success">/WEB-INF/category/category.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
	</package>
	
	<!-- /AUTHOR/ -->
	<package name="author" namespace="/author" extends="root">

		<default-interceptor-ref name="archiveStack"></default-interceptor-ref>
		
		<action name="" class="com.rant.action.AuthorsAction">
			<result name="success">/WEB-INF/author/authors.jsp</result>
			<result name="error">/WEB-INF/author/authors.jsp</result>
		</action>
		
		<action name="*" class="com.rant.action.AuthorAction">
			<result name="success">/WEB-INF/author/author.jsp</result>
			<result name="error">/WEB-INF/error/error.jsp</result>
			<result name="none">/WEB-INF/error/404.jsp</result>
		</action>
		
	</package>
	
	<!-- /DASHBOARD/ -->
	<package name="dashboard" namespace="/dashboard" extends="root">
	
		<default-interceptor-ref name="defaultStack"></default-interceptor-ref>
		
		<action name="">
			<result>/dashboard/index.html</result>
		</action>
		
		<action name="login" class="com.rant.action.dashboard.LoginAction">
			<!-- Success already returns JSON -->
			<result name="error">/WEB-INF/error/error.jsp</result>
		</action>
		
		<action name="forgot" class="com.rant.action.dashboard.ForgotAction">
			<!-- Success already returns JSON -->
			<result name="error">/WEB-INF/error/error.jsp</result>
		</action>
		
	</package>
	
	<!-- UNKNOWN NAMESPACE ARE 404 ERRORS -->
	<package name="unknown" namespace="/**" extends="root">
		<!-- UNKNOWN ACTIONS ARE 404 ERRORS -->
		<action name="**">
			<interceptor-ref name="archiveStack"></interceptor-ref>
			<result>/WEB-INF/error/404.jsp</result>
		</action>
	</package>
	
</struts>